#----------------------------------------------------------------
#
#  Makefile
#
#  Minimal EtherCAT module.
#
#  $Id$
#
#----------------------------------------------------------------

ifneq ($(KERNELRELEASE),)

#----------------------------------------------------------------
#  kbuild section
#----------------------------------------------------------------

obj-m := ec_mini.o

ec_mini-objs := mini.o

#----------------------------------------------------------------

else

#----------------------------------------------------------------
#  default section
#----------------------------------------------------------------

ifneq ($(wildcard ethercat.conf),)
include ethercat.conf
else
KERNELDIR = /usr/src/linux
endif

modules:
	$(MAKE) -C $(KERNELDIR) M=`pwd`

clean:
	$(MAKE) -C $(KERNELDIR) M=`pwd` clean

#----------------------------------------------------------------

endif
